{"version":3,"names":["createFragment","viewId","UIManager","dispatchViewManagerCommand","Wrld3dView","Commands","create","toString","Marker","MarkerView","props","dimensions","setDimensions","useState","width","height","ref","useRef","useEffect","Platform","OS","findNodeHandle","current","mapStyles","PixelRatio","getPixelSizeForLayoutSize","onlayout","event","nativeEvent","layout","bind","style","overflow","children"],"sources":["index.tsx"],"sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\nimport {\n  findNodeHandle,\n  LayoutChangeEvent,\n  PixelRatio,\n  Platform,\n  UIManager,\n  View,\n  ViewStyle,\n} from 'react-native';\n\n\nimport { WrldMap3d, Marker as MarkerView } from './MapViewManager';\n\n\n\nconst createFragment = (viewId: number) =>\n  UIManager.dispatchViewManagerCommand(\n    viewId,\n    // we are calling the 'create' command\n    // @ts-ignore\n    UIManager.Wrld3dView.Commands.create.toString(),\n    [viewId]\n  );\n\ntype MapTypes = {\n  style?: ViewStyle,\n  children?: Element;\n}\n\n\nexport const Marker = MarkerView;\n\n\nexport const Wrld3dView = (props: MapTypes) => {\n  const [dimensions, setDimensions] = useState({ width: 0, height: 0 });\n  const ref = useRef(null);\n\n  useEffect(() => {\n    if (Platform.OS === \"android\") {\n      const viewId = findNodeHandle(ref.current);\n      createFragment(viewId as number);\n    }\n  }, []);\n\n  const mapStyles = {\n    // converts dpi to px, provide desired height\n    height: PixelRatio.getPixelSizeForLayoutSize(dimensions.height),\n    // converts dpi to px, provide desired width\n    width: PixelRatio.getPixelSizeForLayoutSize(dimensions.width),\n  };\n\n\n  const onlayout = (event: LayoutChangeEvent) => {\n    // if (!dimensions.width && !dimensions.height) {\n    const { width, height } = event.nativeEvent.layout;\n    setDimensions({ width: width, height: height })\n    // }\n  }\n\n  return (\n    <View onLayout={onlayout.bind(null)} style={[props.style, { overflow: \"hidden\" }]}>\n      <WrldMap3d\n        style={mapStyles}\n        // @ts-ignore\n        ref={ref}\n      >\n        {props.children}\n      </WrldMap3d>\n    </View>\n\n  )\n}\n\n\n{/* <View style={{ width: 100, height: 100, backgroundColor: \"red\", borderRadius: 50 }}></View> */ }"],"mappings":";;;;;;;AAAA;;AACA;;AAWA;;;;;;AAIA,MAAMA,cAAc,GAAIC,MAAD,IACrBC,sBAAA,CAAUC,0BAAV,CACEF,MADF,EAEE;AACA;AACAC,sBAAA,CAAUE,UAAV,CAAqBC,QAArB,CAA8BC,MAA9B,CAAqCC,QAArC,EAJF,EAKE,CAACN,MAAD,CALF,CADF;;AAeO,MAAMO,MAAM,GAAGC,sBAAf;;;AAGA,MAAML,UAAU,GAAIM,KAAD,IAAqB;EAC7C,MAAM,CAACC,UAAD,EAAaC,aAAb,IAA8B,IAAAC,eAAA,EAAS;IAAEC,KAAK,EAAE,CAAT;IAAYC,MAAM,EAAE;EAApB,CAAT,CAApC;EACA,MAAMC,GAAG,GAAG,IAAAC,aAAA,EAAO,IAAP,CAAZ;EAEA,IAAAC,gBAAA,EAAU,MAAM;IACd,IAAIC,qBAAA,CAASC,EAAT,KAAgB,SAApB,EAA+B;MAC7B,MAAMnB,MAAM,GAAG,IAAAoB,2BAAA,EAAeL,GAAG,CAACM,OAAnB,CAAf;MACAtB,cAAc,CAACC,MAAD,CAAd;IACD;EACF,CALD,EAKG,EALH;EAOA,MAAMsB,SAAS,GAAG;IAChB;IACAR,MAAM,EAAES,uBAAA,CAAWC,yBAAX,CAAqCd,UAAU,CAACI,MAAhD,CAFQ;IAGhB;IACAD,KAAK,EAAEU,uBAAA,CAAWC,yBAAX,CAAqCd,UAAU,CAACG,KAAhD;EAJS,CAAlB;;EAQA,MAAMY,QAAQ,GAAIC,KAAD,IAA8B;IAC7C;IACA,MAAM;MAAEb,KAAF;MAASC;IAAT,IAAoBY,KAAK,CAACC,WAAN,CAAkBC,MAA5C;IACAjB,aAAa,CAAC;MAAEE,KAAK,EAAEA,KAAT;MAAgBC,MAAM,EAAEA;IAAxB,CAAD,CAAb,CAH6C,CAI7C;EACD,CALD;;EAOA,oBACE,6BAAC,iBAAD;IAAM,QAAQ,EAAEW,QAAQ,CAACI,IAAT,CAAc,IAAd,CAAhB;IAAqC,KAAK,EAAE,CAACpB,KAAK,CAACqB,KAAP,EAAc;MAAEC,QAAQ,EAAE;IAAZ,CAAd;EAA5C,gBACE,6BAAC,yBAAD;IACE,KAAK,EAAET,SADT,CAEE;IAFF;IAGE,GAAG,EAAEP;EAHP,GAKGN,KAAK,CAACuB,QALT,CADF,CADF;AAYD,CAtCM;;;AAyCP;EAAC;AAAmG"}