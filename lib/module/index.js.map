{"version":3,"names":["React","useEffect","useRef","useState","findNodeHandle","PixelRatio","UIManager","View","WrldMap3d","createFragment","viewId","dispatchViewManagerCommand","Wrld3dView","Commands","create","toString","props","dimensions","setDimensions","width","height","ref","current","mapStyles","getPixelSizeForLayoutSize","onlayout","event","nativeEvent","layout","bind","style"],"sources":["index.tsx"],"sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\nimport {\n  findNodeHandle,\n  LayoutChangeEvent,\n  PixelRatio,\n  UIManager,\n  View,\n  ViewStyle,\n} from 'react-native';\n\n\nimport { WrldMap3d } from './MapViewManager';\n\n\n\nconst createFragment = (viewId: number) =>\n  UIManager.dispatchViewManagerCommand(\n    viewId,\n    // we are calling the 'create' command\n    // @ts-ignore\n    UIManager.Wrld3dView.Commands.create.toString(),\n    [viewId]\n  );\n\ntype MapTypes = {\n  style?: ViewStyle,\n}\n\nexport const Wrld3dView = (props: MapTypes) => {\n  const [dimensions, setDimensions] = useState({ width: 0, height: 0 });\n  const ref = useRef(null);\n\n  useEffect(() => {\n    const viewId = findNodeHandle(ref.current);\n    createFragment(viewId as number);\n  }, []);\n\n  const mapStyles = {\n    // converts dpi to px, provide desired height\n    height: PixelRatio.getPixelSizeForLayoutSize(dimensions.height),\n    // converts dpi to px, provide desired width\n    width: PixelRatio.getPixelSizeForLayoutSize(dimensions.width),\n  };\n\n\n  const onlayout = (event: LayoutChangeEvent) => {\n    // if (!dimensions.width && !dimensions.height) {\n    const { width, height } = event.nativeEvent.layout;\n    setDimensions({ width: width, height: height })\n    // }\n  }\n\n  return (\n    <View onLayout={onlayout.bind(null)} style={props.style}>\n      <WrldMap3d\n        style={mapStyles}\n        // @ts-ignore\n        ref={ref}\n      />\n    </View>\n\n  )\n}"],"mappings":"AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,MAA3B,EAAmCC,QAAnC,QAAmD,OAAnD;AACA,SACEC,cADF,EAGEC,UAHF,EAIEC,SAJF,EAKEC,IALF,QAOO,cAPP;AAUA,SAASC,SAAT,QAA0B,kBAA1B;;AAIA,MAAMC,cAAc,GAAIC,MAAD,IACrBJ,SAAS,CAACK,0BAAV,CACED,MADF,EAEE;AACA;AACAJ,SAAS,CAACM,UAAV,CAAqBC,QAArB,CAA8BC,MAA9B,CAAqCC,QAArC,EAJF,EAKE,CAACL,MAAD,CALF,CADF;;AAaA,OAAO,MAAME,UAAU,GAAII,KAAD,IAAqB;EAC7C,MAAM,CAACC,UAAD,EAAaC,aAAb,IAA8Bf,QAAQ,CAAC;IAAEgB,KAAK,EAAE,CAAT;IAAYC,MAAM,EAAE;EAApB,CAAD,CAA5C;EACA,MAAMC,GAAG,GAAGnB,MAAM,CAAC,IAAD,CAAlB;EAEAD,SAAS,CAAC,MAAM;IACd,MAAMS,MAAM,GAAGN,cAAc,CAACiB,GAAG,CAACC,OAAL,CAA7B;IACAb,cAAc,CAACC,MAAD,CAAd;EACD,CAHQ,EAGN,EAHM,CAAT;EAKA,MAAMa,SAAS,GAAG;IAChB;IACAH,MAAM,EAAEf,UAAU,CAACmB,yBAAX,CAAqCP,UAAU,CAACG,MAAhD,CAFQ;IAGhB;IACAD,KAAK,EAAEd,UAAU,CAACmB,yBAAX,CAAqCP,UAAU,CAACE,KAAhD;EAJS,CAAlB;;EAQA,MAAMM,QAAQ,GAAIC,KAAD,IAA8B;IAC7C;IACA,MAAM;MAAEP,KAAF;MAASC;IAAT,IAAoBM,KAAK,CAACC,WAAN,CAAkBC,MAA5C;IACAV,aAAa,CAAC;MAAEC,KAAK,EAAEA,KAAT;MAAgBC,MAAM,EAAEA;IAAxB,CAAD,CAAb,CAH6C,CAI7C;EACD,CALD;;EAOA,oBACE,oBAAC,IAAD;IAAM,QAAQ,EAAEK,QAAQ,CAACI,IAAT,CAAc,IAAd,CAAhB;IAAqC,KAAK,EAAEb,KAAK,CAACc;EAAlD,gBACE,oBAAC,SAAD;IACE,KAAK,EAAEP,SADT,CAEE;IAFF;IAGE,GAAG,EAAEF;EAHP,EADF,CADF;AAUD,CAlCM"}